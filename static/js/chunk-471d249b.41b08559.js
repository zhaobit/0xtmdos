(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-471d249b"],{"12ec":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{staticStyle:{padding:"10px"},attrs:{span:24}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户列表")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.RefreshMemberList}},[e._v("刷新")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.MemberList.loading,expression:"MemberList.loading"}],attrs:{data:e.MemberList.rows,height:"550"}},[a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at",formatter:e.formatTime}}),a("el-table-column",{attrs:{label:"购买时间",prop:"buy_at",formatter:e.formatTime}}),a("el-table-column",{attrs:{label:"到期时间",prop:"end_at",formatter:e.formatTime}}),a("el-table-column",{attrs:{label:"点数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"冻结点数:"+t.row.frozen_amount+"\r\n历史点数:"+t.row.total_amount,placement:"bottom-end"}},[a("el-tag",{attrs:{size:"small"}},[e._v(e._s(t.row.credit_amount))])],1)]}}])}),a("el-table-column",{attrs:{label:"状态",prop:"status",formatter:e.formatStatus}}),a("el-table-column",{attrs:{align:"right",width:"350"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"搜索 用户名",size:"small"},on:{change:e.RefreshMemberList},model:{value:e.MemberList.search,callback:function(t){e.$set(e.MemberList,"search",t)},expression:"MemberList.search"}})]}},{key:"default",fn:function(t){return[0===t.row.status?a("el-button",{attrs:{type:"warning",size:"mini"},domProps:{textContent:e._s("禁止")},on:{click:function(a){return e.setMemberStatus(t.row,0)}}}):a("el-button",{attrs:{type:"success",size:"mini"},domProps:{textContent:e._s("恢复")},on:{click:function(a){return e.setMemberStatus(t.row,1)}}}),a("el-button",{attrs:{size:"mini"},domProps:{textContent:e._s("充值")},on:{click:function(a){return e.showpaymentMember(t.row)}}}),a("el-button",{attrs:{size:"mini"},domProps:{textContent:e._s("订单")},on:{click:function(a){return e.showOrderList(t.row)}}}),a("el-button",{attrs:{size:"mini"},domProps:{textContent:e._s("改密")},on:{click:function(a){return e.showresetPassword(t.row)}}}),a("el-button",{attrs:{size:"mini"},domProps:{textContent:e._s("数据")},on:{click:function(a){return e.showdialogUserData(t.row)}}})]}}])})],1),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50,100],disabled:e.MemberList.pagination.disabled,background:"",layout:"total, sizes, prev, pager, next",total:e.MemberList.pagination.total,"page-size":e.MemberList.pagination.pagesize,"current-page":e.MemberList.pagination.currentpage},on:{"update:pageSize":function(t){return e.$set(e.MemberList.pagination,"pagesize",t)},"update:page-size":function(t){return e.$set(e.MemberList.pagination,"pagesize",t)},"update:currentPage":function(t){return e.$set(e.MemberList.pagination,"currentpage",t)},"update:current-page":function(t){return e.$set(e.MemberList.pagination,"currentpage",t)},"current-change":function(t){return e.RefreshMemberList(e.MemberList.pagination.currentpage)},"size-change":function(t){e.pagination.currentpage=1,e.RefreshMemberList(e.MemberList.pagination.currentpage)}}})],1)],1)],1),a("el-dialog",{attrs:{title:"订单列表",visible:e.dialogOrderList.visible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.dialogOrderList,"visible",t)}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogOrderList.loading,expression:"dialogOrderList.loading"}],attrs:{height:"320",data:e.dialogOrderList.data.rows}},[a("el-table-column",{attrs:{label:"标题",prop:"caption"}}),a("el-table-column",{attrs:{label:"订单号",prop:"order_on"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at",formatter:e.formatTime}})],1),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",disabled:e.dialogOrderList.pagination.disabled,"page-size":e.dialogOrderList.pagination.pageSize,"current-page":e.dialogOrderList.pagination.pageIndex,total:e.dialogOrderList.pagination.total},on:{"update:pageSize":function(t){return e.$set(e.dialogOrderList.pagination,"pageSize",t)},"update:page-size":function(t){return e.$set(e.dialogOrderList.pagination,"pageSize",t)},"update:currentPage":function(t){return e.$set(e.dialogOrderList.pagination,"pageIndex",t)},"update:current-page":function(t){return e.$set(e.dialogOrderList.pagination,"pageIndex",t)},"current-change":function(t){return e.showOrderList(e.dialogpayment.item)}}})],1),a("el-dialog",{attrs:{title:"用户充值",visible:e.dialogpayment.visible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.dialogpayment,"visible",t)}}},[a("el-form",{ref:"formpayment",attrs:{model:e.dialogpayment.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"充值点数",prop:"price"}},[a("el-input",{attrs:{type:"number"},model:{value:e.dialogpayment.form.price,callback:function(t){e.$set(e.dialogpayment.form,"price",t)},expression:"dialogpayment.form.price"}})],1),a("el-form-item",{attrs:{label:"备注信息",prop:"remark"}},[a("el-input",{model:{value:e.dialogpayment.form.remark,callback:function(t){e.$set(e.dialogpayment.form,"remark",t)},expression:"dialogpayment.form.remark"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogpayment.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{loading:e.dialogpayment.loading,size:"small",type:"primary"},on:{click:e.topaymentMember}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"用户数据",visible:e.dialogUserData.visible,width:"700px"},on:{"update:visible":function(t){return e.$set(e.dialogUserData,"visible",t)}}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-card",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogUserData.loading,expression:"dialogUserData.loading"}],attrs:{"highlight-current-row":"",height:"320",data:e.dialogUserData.rows},on:{"current-change":e.dialogUserDataChange}},[a("el-table-column",{attrs:{label:"Name",prop:"name"}})],1)],1)],1),a("el-col",{attrs:{span:16}},[a("div",[a("el-card",{staticStyle:{"margin-left":"10px"}},[a("el-input",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogUserData.loading,expression:"dialogUserData.loading"}],attrs:{disabled:0==e.dialogUserData.selectItem.name.length,type:"textarea",rows:13,placeholder:"请输入内容"},model:{value:e.dialogUserData.selectItem.content,callback:function(t){e.$set(e.dialogUserData.selectItem,"content",t)},expression:"dialogUserData.selectItem.content"}}),a("div",{staticStyle:{"margin-top":"10px",height:"20px"}},[a("el-button",{staticStyle:{float:"right"},attrs:{disabled:0==e.dialogUserData.selectItem.name.length,size:"small",type:"primary"},domProps:{textContent:e._s("修改")},on:{click:e.saveUserCenter}})],1)],1)],1)])],1)],1)],1)},o=[],l=(a("4160"),a("b0c0"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("2909")),n=a("1f94"),s=a("ed08"),r={props:{appkey:{type:String,default:function(){return""}}},data:function(){return{MemberList:{selectItem:{},loading:!1,rows:[],search:"",pagination:{disabled:!0,pagesize:10,total:0,currentpage:1}},dialogOrderList:{visible:!1,loading:!0,data:{},item:{},pagination:{display:!1,pageSize:5,pageIndex:1,total:0}},dialogpayment:{visible:!1,loading:!1,form:{app_key:this.appkey,sid:0,price:100,remark:"充值"},item:{}},dialogUserData:{visible:!1,loading:!1,selectItem:{content:"",name:""},rows:[]}}},mounted:function(){this.RefreshMemberList()},methods:{RefreshMemberList:function(e){var t=this;this.MemberList.loading=!0,this.MemberList.pagination.disabled=!0;var a=0,i=this.MemberList.pagination.pagesize;e?a=(e-1)*i:this.MemberList.pagination.currentpage=1,Object(n["a"])({app_key:this.appkey,search:this.MemberList.search,offset:a,limit:i}).then((function(e){var a=e.result;t.MemberList.rows=a.rows,t.MemberList.pagination.total=a.total})).finally((function(){t.MemberList.loading=!1,t.MemberList.pagination.disabled=!1}))},setMemberStatus:function(e,t){var a=this,i=1===t?n["h"]:n["i"],o=1===t?"恢复":"禁用";this.$msgbox({title:"".concat(o,"用户"),message:"此操作将影响用户登录, \r\n是否[".concat(o,"]?"),showCancelButton:!0,confirmButtonText:o,cancelButtonText:"取消",beforeClose:function(t,l,n){"confirm"===t?(l.confirmButtonLoading=!0,l.confirmButtonText="执行中...",i({app_key:a.appkey,sid:e.sid}).then((function(e){n()})).finally((function(){l.confirmButtonLoading=!1,l.confirmButtonText=o}))):n()}}).then((function(){a.$message.success("操作成功."),a.RefreshMemberList()}))},showOrderList:function(e){var t=this;this.dialogOrderList.pagination.disabled=!0,this.dialogOrderList.visible=!0,this.dialogOrderList.loading=!0,this.dialogOrderList.item=e;var a=this.dialogOrderList.pagination.pageSize,i=(this.dialogOrderList.pagination.pageIndex-1)*a;Object(n["b"])({app_key:this.appkey,sid:e.sid,limit:a,offset:i}).then((function(e){t.dialogOrderList.data=e.result,t.dialogOrderList.pagination.total=e.result.total})).finally((function(){t.dialogOrderList.loading=!1,t.dialogOrderList.pagination.disabled=!1}))},showpaymentMember:function(e){this.dialogpayment.visible=!0,this.$refs.formpayment&&this.$refs.formpayment.resetFields(),this.dialogpayment.form.sid=e.sid,this.dialogpayment.item=e},topaymentMember:function(){var e=this;this.dialogpayment.loading=!0,Object(n["e"])(this.dialogpayment.form).then((function(t){e.$message.success("充值成功"),e.dialogpayment.visible=!1})).finally((function(){e.dialogpayment.loading=!1}))},showresetPassword:function(e){var t=this;this.$prompt("请输入要修改的密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^[\w|\.|@]{6,}$/,inputErrorMessage:"最少6位 字母 或 数字",beforeClose:function(a,i,o){"confirm"===a?(i.confirmButtonLoading=!0,i.confirmButtonText="执行中...",Object(n["f"])({app_key:t.appkey,sid:e.sid,password:i.inputValue}).then((function(e){o()})).finally((function(){i.confirmButtonLoading=!1}))):o()}}).then((function(e){console.log(e),t.$message({type:"success",message:"修改成功: "+e.value})})).catch((function(){}))},showdialogUserData:function(e){var t=this;this.dialogUserData.visible=!0,this.dialogUserData.selectItem={name:"",content:""},this.dialogUserData.sid=e.sid,Object(n["d"])({app_key:this.appkey,sid:e.sid}).then((function(e){Object(l["a"])(e.result).forEach((function(e){e.content=""})),t.dialogUserData.rows=e.result}))},dialogUserDataChange:function(e){var t=this;e.content="",this.dialogUserData.selectItem=e,this.dialogUserData.loading=!0,Object(n["c"])({app_key:this.appkey,sid:this.dialogUserData.sid,name:e.name}).then((function(t){var a=t.result[0];e.content=a.content})).finally((function(){t.dialogUserData.loading=!1}))},saveUserCenter:function(){var e=this,t=this.dialogUserData.selectItem,a={app_key:this.appkey,sid:this.dialogUserData.sid,name:t.name};Object(n["g"])(a,t.content).then((function(t){e.$message.info("保存成功..")}))},formatTime:function(e,t){return Object(s["c"])(e[t.property],"{y}-{m}-{d} {h}:{i}:{s}")},formatStatus:function(e,t){var a=e[t.property];return 0===a?"正常":"禁用"}}},c=r,d=a("2877"),u=Object(d["a"])(c,i,o,!1,null,null,null);t["a"]=u.exports},"1f94":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"i",(function(){return n})),a.d(t,"h",(function(){return s})),a.d(t,"b",(function(){return r})),a.d(t,"f",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"g",(function(){return u})),a.d(t,"c",(function(){return p}));var i=a("b775");function o(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/getMemberList",method:"get",params:e})}function l(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/paymentMember",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/stopMember",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/startMember",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/getOrderList",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/resetPassword",method:"get",params:e})}function d(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/getUserKeys",method:"get",params:e})}function u(e,t){return Object(i["a"])({url:"/Ajax/ProductDataCenter/setUserCenter",method:"post",contentType:"text/plain",params:e,data:t})}function p(e){return Object(i["a"])({url:"/Ajax/ProductDataCenter/getUserCenter",method:"get",params:e})}},"1fe5":function(e,t,a){},"251b":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return n}));var i=a("b775");function o(e){return Object(i["a"])({url:"/Ajax/ProductSales/newCdKey",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/Ajax/ProductSales/outCardList",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/Ajax/ProductSales/getCardList",method:"get",params:e})}},"2b3e":function(e,t,a){},"30ad":function(e,t,a){"use strict";var i=a("bf5d"),o=a.n(i);o.a},"3d45":function(e,t,a){"use strict";var i=a("6d1a"),o=a.n(i);o.a},"3fa4":function(e,t,a){},"6d1a":function(e,t,a){},"7a93":function(e,t,a){"use strict";a.d(t,"f",(function(){return o})),a.d(t,"j",(function(){return l})),a.d(t,"g",(function(){return n})),a.d(t,"k",(function(){return s})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return u})),a.d(t,"h",(function(){return p})),a.d(t,"a",(function(){return m})),a.d(t,"i",(function(){return f}));var i=a("b775");function o(e){return Object(i["a"])({url:"/Ajax/Product/newProject",method:"post",data:e})}function l(e){return Object(i["a"])({url:"/Ajax/Product/setProject",method:"post",data:e})}function n(e){return Object(i["a"])({url:"/Ajax/ProductSales/newSalesConfig",method:"post",data:e})}function s(e){return Object(i["a"])({url:"/Ajax/ProductSales/setSalesConfig",method:"post",data:e})}function r(e){return Object(i["a"])({url:"/Ajax/Product/getTeamList",method:"get",params:e})}function c(e){return Object(i["a"])({url:"/Ajax/Product/addTeam",method:"post",data:e})}function d(e){return Object(i["a"])({url:"/Ajax/Product/delTeam",method:"post",data:e})}function u(e){return Object(i["a"])({url:"/Ajax/Product/addModuleGroup",method:"post",data:e})}function p(e){return Object(i["a"])({url:"/Ajax/Product/setAgentCredit",method:"post",data:e})}function m(e){return Object(i["a"])({url:"/Ajax/Product/addModule",method:"post",data:e})}function f(e){return Object(i["a"])({url:"/Ajax/Product/setModule",method:"post",data:e})}},"81e3":function(e,t,a){"use strict";var i=a("8de1"),o=a.n(i);o.a},"88f8":function(e,t,a){"use strict";var i=a("fc2c"),o=a.n(i);o.a},"8de1":function(e,t,a){},a87e:function(e,t,a){"use strict";var i=a("1fe5"),o=a.n(i);o.a},bf5d:function(e,t,a){},bffc:function(e,t,a){"use strict";var i=a("2b3e"),o=a.n(i);o.a},cd21:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-container"},[a("devmanager")],1)},o=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manager-container"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.ProjectInfoloading,expression:"ProjectInfoloading"}],staticClass:"appinfo",attrs:{"element-loading-text":"玩命加载中..."}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-link",{staticClass:"caption",attrs:{type:"primary"},domProps:{textContent:e._s(e.ProjectInfo.caption)},on:{click:function(t){e.reseteditForm(),e.dialogeditProject.Visible=!0}}}),a("h5",{staticClass:"describe",domProps:{textContent:e._s(e.ProjectInfo.describe)}})],1),a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{float:"right"}},[a("el-link",{attrs:{type:"primary"},on:{click:e.showdialogteamlist}},[e._v("团队成员")])],1)])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("el-tabs",{model:{value:e.tabsValue,callback:function(t){e.tabsValue=t},expression:"tabsValue"}},[a("el-tab-pane",{attrs:{name:"shop",label:"商品管理",lazy:""}},[a("shopcomponent",{attrs:{appkey:e.appkey,projectinfo:e.ProjectInfo}})],1),a("el-tab-pane",{attrs:{name:"user",label:"用户管理",lazy:""}},[a("usercomponent",{attrs:{appkey:e.appkey}})],1),a("el-tab-pane",{attrs:{name:"card",label:"卡密管理",lazy:""}},[a("cardcomponent",{attrs:{appkey:e.appkey}})],1),a("el-tab-pane",{attrs:{name:"order",label:"订单管理",lazy:""}},[a("ordercomponent",{attrs:{appkey:e.appkey}})],1),a("el-tab-pane",{attrs:{name:"code",label:"远程代码",lazy:""}},[a("codecomponent",{attrs:{appkey:e.appkey}})],1)],1)],1)],1),a("el-dialog",{attrs:{width:"35%",title:"修改项目",visible:e.dialogeditProject.Visible},on:{"update:visible":function(t){return e.$set(e.dialogeditProject,"Visible",t)}}},[[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogeditProject.loading,expression:"dialogeditProject.loading"}],attrs:{"element-loading-text":"正在保存",model:e.dialogeditProject.From,"label-width":"80px"}},[a("el-tabs",{staticStyle:{height:"350px"},attrs:{"tab-position":"left"},model:{value:e.dialogeditProject.tabIndex,callback:function(t){e.$set(e.dialogeditProject,"tabIndex",t)},expression:"dialogeditProject.tabIndex"}},[a("el-tab-pane",{attrs:{name:"base",label:"基础信息"}},[a("el-form-item",{attrs:{label:"产品标题"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogeditProject.From.caption,callback:function(t){e.$set(e.dialogeditProject.From,"caption",t)},expression:"dialogeditProject.From.caption"}})],1),a("el-form-item",{attrs:{label:"服务模式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.service_status,callback:function(t){e.$set(e.dialogeditProject.From,"service_status",t)},expression:"dialogeditProject.From.service_status"}},e._l(e.fromSelects.service_status,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"应用简介"}},[a("el-input",{attrs:{type:"textarea",rows:"5",autocomplete:"off"},model:{value:e.dialogeditProject.From.describe,callback:function(t){e.$set(e.dialogeditProject.From,"describe",t)},expression:"dialogeditProject.From.describe"}})],1),a("el-form-item",{attrs:{label:"重置数据"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.reset,callback:function(t){e.$set(e.dialogeditProject.From,"reset",t)},expression:"dialogeditProject.From.reset"}},e._l(e.fromSelects.reset,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)],1),a("el-tab-pane",{attrs:{label:"注册信息",name:"reg"}},[a("el-form-item",{attrs:{label:"注册状态"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.registers_status,callback:function(t){e.$set(e.dialogeditProject.From,"registers_status",t)},expression:"dialogeditProject.From.registers_status"}},e._l(e.fromSelects.registers_status,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"注册试用"}},[a("el-switch",{model:{value:e.dialogeditProject.From.registers_try,callback:function(t){e.$set(e.dialogeditProject.From,"registers_try",t)},expression:"dialogeditProject.From.registers_try"}})],1),a("el-form-item",{attrs:{label:"试用周期"}},[a("el-input-number",{attrs:{disabled:!e.dialogeditProject.From.registers_try,size:"small","controls-position":"right",min:1,max:10},model:{value:e.dialogeditProject.From.try_cycle_num,callback:function(t){e.$set(e.dialogeditProject.From,"try_cycle_num",t)},expression:"dialogeditProject.From.try_cycle_num"}})],1),a("el-form-item",{attrs:{label:"周期单位"}},[a("el-select",{attrs:{disabled:!e.dialogeditProject.From.registers_try,placeholder:"请选择"},model:{value:e.dialogeditProject.From.try_cycle_type,callback:function(t){e.$set(e.dialogeditProject.From,"try_cycle_type",t)},expression:"dialogeditProject.From.try_cycle_type"}},e._l(e.fromSelects.try_cycle_type,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1)],1),a("el-tab-pane",{attrs:{label:"授权信息",name:"auth"}},[a("el-form-item",{attrs:{label:"授权模式"}},[a("el-select",{attrs:{disabled:!0,placeholder:"请选择"},model:{value:e.dialogeditProject.From.verify_type,callback:function(t){e.$set(e.dialogeditProject.From,"verify_type",t)},expression:"dialogeditProject.From.verify_type"}},e._l(e.fromSelects.verify_type,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"绑定类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.bind_type,callback:function(t){e.$set(e.dialogeditProject.From,"bind_type",t)},expression:"dialogeditProject.From.bind_type"}},e._l(e.fromSelects.bind_type,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"账户多开"}},[a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:100},model:{value:e.dialogeditProject.From.bind_limit,callback:function(t){e.$set(e.dialogeditProject.From,"bind_limit",t)},expression:"dialogeditProject.From.bind_limit"}})],1),a("el-form-item",{attrs:{label:"上限处理"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.bind_process,callback:function(t){e.$set(e.dialogeditProject.From,"bind_process",t)},expression:"dialogeditProject.From.bind_process"}},e._l(e.fromSelects.bind_process,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"心跳策略"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialogeditProject.From.sign_pack,callback:function(t){e.$set(e.dialogeditProject.From,"sign_pack",t)},expression:"dialogeditProject.From.sign_pack"}},e._l(e.fromSelects.sign_pack,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("el-form-item",{attrs:{label:"心跳间隔"}},[a("el-input-number",{attrs:{size:"small","controls-position":"right",min:1,max:1e3},model:{value:e.dialogeditProject.From.bind_time,callback:function(t){e.$set(e.dialogeditProject.From,"bind_time",t)},expression:"dialogeditProject.From.bind_time"}})],1)],1),a("el-tab-pane",{attrs:{label:"认证服务",name:"key"}},[a("el-form-item",{attrs:{label:"点数更新"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogeditProject.From.cycle_change,callback:function(t){e.$set(e.dialogeditProject.From,"cycle_change",t)},expression:"dialogeditProject.From.cycle_change"}})],1),a("el-form-item",{attrs:{label:"用户禁用"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialogeditProject.From.time_out,callback:function(t){e.$set(e.dialogeditProject.From,"time_out",t)},expression:"dialogeditProject.From.time_out"}})],1),a("el-form-item",{attrs:{label:"app_key"}},[a("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.dialogeditProject.From.app_key,callback:function(t){e.$set(e.dialogeditProject.From,"app_key",t)},expression:"dialogeditProject.From.app_key"}})],1),a("el-form-item",{attrs:{label:"private"}},[a("el-input",{attrs:{autocomplete:"off",readonly:""},model:{value:e.dialogeditProject.From.private_salt,callback:function(t){e.$set(e.dialogeditProject.From,"private_salt",t)},expression:"dialogeditProject.From.private_salt"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:e.reseteditForm}},[e._v("重 置")]),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogeditProject.Visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.editsubmitForm}},[e._v("修 改")])],1)]],2),a("el-dialog",{attrs:{width:"400px",title:"团队成员",visible:e.dialogteamlist.visible},on:{"update:visible":function(t){return e.$set(e.dialogteamlist,"visible",t)}}},[a("div",[a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteselectMember,loading:e.dialogteamlist.remote.loading,size:"small"},model:{value:e.dialogteamlist.username,callback:function(t){e.$set(e.dialogteamlist,"username",t)},expression:"dialogteamlist.username"}},e._l(e.dialogteamlist.remote.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small"},on:{click:function(t){return e.addteam(e.dialogteamlist.username)}}},[e._v("邀请")]),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small"},on:{click:e.RefreshTeamlist}},[e._v("刷新")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogteamlist.loading,expression:"dialogteamlist.loading"}],attrs:{height:"400",data:e.dialogteamlist.rows}},[a("el-table-column",{attrs:{label:"id",prop:"sid",width:"50"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"状态",prop:"status",formatter:e.formatStatus}}),a("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.removeteam(t.row.username)}}},[e._v("移除")])]}}])})],1)],1)],1)},n=[],s=(a("4de4"),a("d3b7"),a("5530")),r=a("2f62"),c=a("6062"),d=a("7a93"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",[a("el-col",{staticClass:"cardrow",attrs:{span:8}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-select",{directives:[{name:"loading",rawName:"v-loading",value:e.ModuleList.loading,expression:"ModuleList.loading"}],staticStyle:{width:"170px"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.ModuleList.selectItem,callback:function(t){e.$set(e.ModuleList,"selectItem",t)},expression:"ModuleList.selectItem"}},[a("el-option",{key:"all",attrs:{value:"all",label:"全部模块"}},[a("span",{staticStyle:{float:"left"}},[e._v("全部模块")]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("All")])]),e._l(e.ModuleList.rows,(function(t){return a("el-option",{key:t.module,attrs:{label:t.caption,value:t.module}},[a("span",{class:0!==t.status?"through":""},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.module))])])])}))],2),a("el-button",{staticStyle:{padding:"3px 5px"},attrs:{type:"text"},on:{click:function(t){return e.showdialogModule(null)}}},[e._v("添加模块")]),a("el-button",{staticStyle:{padding:"3px 5px"},attrs:{type:"text"},on:{click:function(t){return e.showdialogSales(null)}}},[e._v("添加商品")]),a("el-button",{staticStyle:{padding:"3px 5px"},attrs:{type:"text"},on:{click:e.showdialigNamespace}},[e._v("代码权限")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.RefreshModuleList}},[e._v("刷新")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.SalesList.loading,expression:"SalesList.loading"}],attrs:{"element-loading-text":"玩命加载中...",data:e.computedSalesList,height:"500px"}},[a("el-table-column",{attrs:{label:"模块"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{domProps:{textContent:e._s(t.row.module_name)},on:{click:function(a){return e.showdialogModule(t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{domProps:{textContent:e._s(t.row.caption)},on:{click:function(a){return e.showdialogSales(t.row)}}})]}}])}),a("el-table-column",{attrs:{label:"售价",prop:"price",width:"60px"}}),a("el-table-column",{attrs:{label:"时长",width:"110px"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.cycle_num)+" / "+e._s(e.cycle_type[t.row.cycle_type])+" ")]}}])})],1)],1)],1),a("el-col",{staticClass:"cardrow",attrs:{span:16}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.TeamList.module,callback:function(t){e.$set(e.TeamList,"module",t)},expression:"TeamList.module"}},[a("el-option",{key:"all",attrs:{value:"all",label:"全部"}},[a("span",{staticStyle:{float:"left"}},[e._v("全部")]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("All")])]),e._l(e.ModuleList.rows,(function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.module))])])})),a("el-option",{key:"gs",attrs:{value:"gs",label:"未分配"}},[a("span",{staticStyle:{float:"left"}},[e._v("未分配")]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v("gs")])])],2),a("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:e.showAddAgentDialog}},[e._v("邀请代理")]),a("el-button",{staticStyle:{padding:"3px 10px"},attrs:{type:"text"},on:{click:e.showSetAgentDialog}},[e._v("设置模块")]),a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:e.RefreshTeamList}},[e._v("刷新")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.TeamList.loading,expression:"TeamList.loading"}],attrs:{height:"500",data:e.computedTeamList}},[a("el-table-column",{attrs:{label:"用户名",prop:"username"}}),a("el-table-column",{attrs:{label:"状态",prop:"status",formatter:e.formatStatus}}),a("el-table-column",{attrs:{label:"额度"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.setamount(t.row)}}},[e._v(e._s(t.row.item.credit_amount))])]}}])}),a("el-table-column",{attrs:{label:"上次结算",prop:"item.old_amount"}}),a("el-table-column",{attrs:{label:"已销售",prop:"item.use_amount"}}),a("el-table-column",{attrs:{label:"总销售",prop:"item.total_sale_volume"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("div",[0===t.row.status?a("el-button",{attrs:{size:"small",type:"text"}},[e._v("禁用")]):a("el-button",{attrs:{size:"small",type:"text"}},[e._v("恢复")]),a("el-button",{attrs:{size:"small",type:"text"}},[e._v("禁用")]),a("el-button",{attrs:{size:"small",type:"text"}},[e._v("禁用")])],1):e._e()]}}])})],1)],1)],1),a("el-dialog",{attrs:{title:"邀请代理",visible:e.AddAgentDialog.visible,"close-on-click-modal":!1,width:"300px"},on:{"update:visible":function(t){return e.$set(e.AddAgentDialog,"visible",t)}}},[a("div",[a("span",[e._v("搜索用户 ")]),a("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入用户名","remote-method":e.remoteselectMember,loading:e.AddAgentDialog.remote.loading,size:"small"},model:{value:e.AddAgentDialog.username,callback:function(t){e.$set(e.AddAgentDialog,"username",t)},expression:"AddAgentDialog.username"}},e._l(e.AddAgentDialog.remote.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.username}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.AddAgentDialog.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.AddAgent}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"设置代理模块",visible:e.setAgentDialog.visible,"close-on-click-modal":!1,width:"300px"},on:{"update:visible":function(t){return e.$set(e.setAgentDialog,"visible",t)}}},[a("div",{staticStyle:{"margin-bottom":"30px"}},[a("span",[e._v("选择模块 ")]),a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.setAgentDialog.module,callback:function(t){e.$set(e.setAgentDialog,"module",t)},expression:"setAgentDialog.module"}},e._l(e.ModuleList.rows,(function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.module))])])})),1)],1),a("div",[a("span",[e._v("选择用户 ")]),a("el-select",{attrs:{placeholder:"请输入用户名",size:"small"},model:{value:e.setAgentDialog.sid,callback:function(t){e.$set(e.setAgentDialog,"sid",t)},expression:"setAgentDialog.sid"}},e._l(e.setAgentDialog.users,(function(e){return a("el-option",{key:e.sid,attrs:{label:e.username,value:e.sid}})})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.setAgentDialog.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){return e.SetAgent()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"add"==e.DialogModule.type?"添加模块":"编辑模块",visible:e.DialogModule.visible,"close-on-click-modal":!1,width:"350px"},on:{"update:visible":function(t){return e.$set(e.DialogModule,"visible",t)}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("模块名称 ")]),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small",disabled:"edit"==e.DialogModule.type},model:{value:e.DialogModule.form.module,callback:function(t){e.$set(e.DialogModule.form,"module",t)},expression:"DialogModule.form.module"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("模块标题 ")]),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.DialogModule.form.caption,callback:function(t){e.$set(e.DialogModule.form,"caption",t)},expression:"DialogModule.form.caption"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("可用状态 ")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.DialogModule.form.enable,callback:function(t){e.$set(e.DialogModule.form,"enable",t)},expression:"DialogModule.form.enable"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.DialogModule.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.DialogModule.loading},on:{click:function(t){return e.savedialogModule()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"add"==e.DialogSales.type?"添加商品":"编辑商品",visible:e.DialogSales.visible,"close-on-click-modal":!1,width:"350px"},on:{"update:visible":function(t){return e.$set(e.DialogSales,"visible",t)}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("商品模块 ")]),a("el-select",{attrs:{size:"small",placeholder:"请选择",disabled:"edit"==e.DialogSales.type},model:{value:e.DialogSales.form.module_id,callback:function(t){e.$set(e.DialogSales.form,"module_id",t)},expression:"DialogSales.form.module_id"}},e._l(e.ModuleList.rows,(function(t){return a("el-option",{key:t.module,attrs:{label:t.caption,value:t.id}},[a("span",{class:0!==t.status?"through":""},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.module))])])])})),1)],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("商品时长 ")]),a("el-input",{staticStyle:{width:"100px"},attrs:{size:"mini",disabled:"edit"==e.DialogSales.type},model:{value:e.DialogSales.form.cycle_num,callback:function(t){e.$set(e.DialogSales.form,"cycle_num",t)},expression:"DialogSales.form.cycle_num"}}),a("span",[e._v(" / ")]),a("el-select",{staticStyle:{width:"90px"},attrs:{size:"mini",disabled:"edit"==e.DialogSales.type},model:{value:e.DialogSales.form.cycle_type,callback:function(t){e.$set(e.DialogSales.form,"cycle_type",t)},expression:"DialogSales.form.cycle_type"}},e._l(e.cycle_type,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:t}})})),1)],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("商品标题 ")]),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.DialogSales.form.caption,callback:function(t){e.$set(e.DialogSales.form,"caption",t)},expression:"DialogSales.form.caption"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("商品售价 ")]),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.DialogSales.form.price,callback:function(t){e.$set(e.DialogSales.form,"price",t)},expression:"DialogSales.form.price"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("备注信息 ")]),a("el-input",{staticStyle:{width:"250px"},attrs:{size:"small"},model:{value:e.DialogSales.form.remark,callback:function(t){e.$set(e.DialogSales.form,"remark",t)},expression:"DialogSales.form.remark"}})],1),a("div",{staticStyle:{"margin-bottom":"20px"}},[a("span",[e._v("生成计时 ")]),a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.DialogSales.form.make_or_use,callback:function(t){e.$set(e.DialogSales.form,"make_or_use",t)},expression:"DialogSales.form.make_or_use"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.DialogSales.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.DialogSales.loading},on:{click:function(t){return e.saveSalesConfig()}}},[e._v("确 定")])],1)]),a("el-dialog",{attrs:{title:"模块权限",visible:e.Dialogcode.visible,"close-on-click-modal":!1,width:"350px"},on:{"update:visible":function(t){return e.$set(e.Dialogcode,"visible",t)}}},[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-select",{attrs:{size:"small"},on:{change:function(t){return e.refreshNamespaceList(e.Dialogcode.module_id)}},model:{value:e.Dialogcode.module_id,callback:function(t){e.$set(e.Dialogcode,"module_id",t)},expression:"Dialogcode.module_id"}},e._l(e.ModuleList.rows,(function(e){return a("el-option",{key:e.id,attrs:{value:e.id,label:e.caption}})})),1),a("el-button",{staticStyle:{float:"right"},attrs:{size:"small",type:"primary"},on:{click:function(t){return e.refreshNamespaceList()}}},[e._v("刷 新")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.Dialogcode.loading,expression:"Dialogcode.loading"}],ref:"codenamespace",attrs:{data:e.Dialogcode.namespace,height:"200px"},on:{"selection-change":e.namespaceSelsct}},[a("el-table-column",{attrs:{type:"selection"}}),a("el-table-column",{attrs:{label:"namespace"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row)+" ")]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.Dialogcode.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary",loading:e.Dialogcode.loading},on:{click:e.saveModuleNamespace}},[e._v("保 存")])],1)],1)],1)},p=[],m=(a("99af"),a("7db0"),a("4160"),a("a630"),a("c975"),a("13d5"),a("6062b"),a("3ca3"),a("159b"),a("ddb0"),a("3835")),f=a("b775");function g(e){return Object(f["a"])({url:"/Ajax/ProductCloud/remoteGetNamespaceList",method:"get",params:e})}function h(e){return Object(f["a"])({url:"/Ajax/ProductCloud/remoteGetCodeList",method:"get",params:e})}function b(e){return Object(f["a"])({url:"/Ajax/ProductCloud/getModuleNamespaceList",method:"get",params:e})}function v(e){return Object(f["a"])({url:"/Ajax/ProductCloud/setModuleNamespace",method:"post",data:e})}function y(e){return Object(f["a"])({url:"/Ajax/ProductCloud/remoteSetCode",method:"post",data:e})}var _={props:{appkey:{type:String,default:function(){return""}},projectinfo:{type:Object,default:function(){return{}}}},data:function(){return{cycle_type:["秒","分钟","小时","天","月","年"],ModuleList:{selectItem:"all",rows:[],loading:!0},SalesList:{showrows:[],rows:[],loading:!0},TeamList:{module:"all",selectItem:{},loading:!1,rows:[]},AddAgentDialog:{loading:!1,visible:!1,users:[],username:"",remote:{loading:!1,options:[]}},setAgentDialog:{loading:!1,visible:!1,sid:"",module:""},DialogModule:{loading:!1,visible:!1,type:"add",form:{module_id:0,caption:"",module:"",enable:!1}},DialogSales:{loading:!1,visible:!1,type:"add",form:{remark:"",type:0,module_id:0,caption:"",sales_id:""}},Dialogcode:{loading:!1,visible:!1,module_id:{},selectName:[],modules:[],namespace:[]}}},computed:{computedTeamList:function(){var e=this.TeamList.rows,t=this.TeamList.module;switch(t){case"all":return e;case"gs":return e.filter((function(e){return 0!==e.status}));default:var a=this.ModuleList.rows.find((function(e){return e.id===t})).sid;return e.filter((function(e){return a&&a.find((function(t){return t===e.sid}))}))}},computedSalesList:function(){var e=this.SalesList.rows,t=this.ModuleList.selectItem;switch(t){case"all":return e;default:return e.filter((function(e){return e.module===t}))}}},mounted:function(){this.RefreshModuleList(),this.RefreshTeamList()},methods:{RefreshModuleList:function(){var e=this;this.ModuleList.loading=!0,this.SalesList.loading=!0,Promise.all([Object(c["c"])({app_key:this.appkey}),Object(c["g"])({app_key:this.appkey})]).then((function(t){var a=Object(m["a"])(t,2),i=a[0].result,o=a[1].result;e.ModuleList.rows=i,e.SalesList.rows=o})).finally((function(){e.ModuleList.loading=!1,e.SalesList.loading=!1}))},RefreshTeamList:function(){var e=this;this.TeamList.loading=!0,Object(d["e"])({app_key:this.appkey,module:"agent"}).then((function(t){var a=t.result;a.forEach((function(t){t.item||(t.item={credit_amount:0===t.status?"0":"",use_amount:"",old_amount:"",total_sale_volume:""}),e.setAgentDialog.users=a.filter((function(e){return 0===e.status}))})),e.TeamList.rows=a})).finally((function(){e.TeamList.loading=!1}))},showAddAgentDialog:function(){this.AddAgentDialog.username="",this.AddAgentDialog.remote.options=[],this.AddAgentDialog.visible=!0},remoteselectMember:function(e){var t=this;""!==e?(this.AddAgentDialog.remote.loading=!0,Object(c["h"])({app_key:this.appkey,module:"agent",username:e}).then((function(e){t.AddAgentDialog.remote.options=e.result})).finally((function(){t.AddAgentDialog.remote.loading=!1}))):this.AddAgentDialog.remote.options=[]},AddAgent:function(){var e=this,t=this.AddAgentDialog.username;this.TeamList.rows&&this.TeamList.rows.find((function(e){return e.username===t}))?this.$message("该用户已存在."):Object(d["c"])({app_key:this.appkey,module:"agent",username:t}).then((function(t){e.$message.success("添加成功.")})).finally((function(){e.AddAgentDialog.visible=!1}))},showSetAgentDialog:function(){this.setAgentDialog.module="",this.setAgentDialog.sid="",this.setAgentDialog.visible=!0},SetAgent:function(){var e=this,t=this.setAgentDialog.module,a=this.setAgentDialog.sid,i=this.ModuleList.rows.find((function(e){return e.id===t})).sid;i&&i.find((function(e){return e===a}))?this.$message("该用户已存在."):Object(d["b"])({app_key:this.appkey,module_id:t,sid:a}).then((function(t){e.$message.success("添加成功.")})).finally((function(){e.setAgentDialog.visible=!1}))},setamount:function(e){var t=this;console.log(e),this.$prompt("设置额度","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputType:"number",inputValue:e.item.credit_amount}).then((function(a){var i=a.value;e.item.credit_amount="正在设置..",Object(d["h"])({app_key:t.appkey,sid:e.sid,credit_amount:i}).then((function(){e.item.credit_amount=i,t.$message.success("设置成功.")}))})).catch((function(){}))},showdialogModule:function(e){if(e){var t=this.ModuleList.rows.find((function(t){return t.id===e.module_id}));this.DialogModule.type="edit",this.DialogModule.form={module_id:t.id,caption:t.caption,module:t.module,enable:0===t.status}}else this.DialogModule.type="add",this.DialogModule.form={module_id:0,caption:"新模块",module:"newModule",enable:!0};this.DialogModule.visible=!0},savedialogModule:function(){var e=this,t=this.DialogModule.form;if(this.DialogModule.loading=!0,"add"===this.DialogModule.type)Object(d["a"])({app_key:this.appkey,module:t.module,caption:t.caption}).then((function(t){e.ModuleList.rows.push(t.result),e.$message.success("添加成功")})).finally((function(){e.DialogModule.visible=!1,e.DialogModule.loading=!1}));else{var a=this.ModuleList.rows.find((function(e){return e.id===t.module_id}));Object(d["i"])({app_key:this.appkey,module_id:t.module_id,caption:t.caption,status:t.enable?0:1}).then((function(){a.caption=t.caption,a.status=t.status})).finally((function(){e.DialogModule.visible=!1,e.DialogModule.loading=!1}))}},showdialogSales:function(e){e?(this.DialogSales.type="edit",this.DialogSales.form=Object(s["a"])({},e)):(this.DialogSales.type="add",this.DialogSales.form={module_id:this.ModuleList.rows[0].id,cycle_type:3,cycle_num:30,price:1e3,caption:"新商品",module:"",make_or_use:!1}),this.DialogSales.visible=!0},saveSalesConfig:function(){var e=this,t=this.DialogSales.form;if(this.DialogSales.loading=!0,"add"===this.DialogSales.type)Object(d["g"])({app_key:this.appkey,module_id:t.module_id,caption:t.caption,verify_type:this.projectinfo.verify_type,cycle_num:t.cycle_num,cycle_type:t.cycle_type,price:t.price,remark:t.remark,make_or_use:t.make_or_use}).then((function(t){e.SalesList.rows.push(t.result),e.$message.success("添加成功")})).finally((function(){e.DialogSales.visible=!1,e.DialogSales.loading=!1}));else{var a=this.SalesList.rows.find((function(e){return e.id===t.id}));Object(d["k"])(Object(s["a"])({app_key:this.appkey,sales_id:t.id},t)).then((function(){a.caption=t.caption,a.price=t.price,a.price=t.price,a.remark=t.remark,a.make_or_use=t.make_or_use})).finally((function(){e.DialogSales.visible=!1,e.DialogSales.loading=!1}))}},showdialigNamespace:function(){this.Dialogcode.module_id=this.ModuleList.rows[0].id,this.Dialogcode.visible=!0,this.refreshNamespaceList()},refreshNamespaceList:function(e){var t=this;this.Dialogcode.loading=!0,e?b({app_key:this.appkey,module_id:e}).then((function(e){t.Dialogcode.modules=[],t.Dialogcode.namespace.forEach((function(a){var i=e.result.rows.find((function(e){return e.namespace===a}));i&&0===i.status&&(t.Dialogcode.modules.push(i.namespace),t.$refs.codenamespace.toggleRowSelection(a))}))})).finally((function(){t.Dialogcode.loading=!1})):g({app_key:this.appkey}).then((function(e){t.Dialogcode.namespace=e.args.namespace,t.refreshNamespaceList(t.Dialogcode.module_id)})).finally((function(){}))},namespaceSelsct:function(e){this.Dialogcode.selectName=e},saveModuleNamespace:function(){var e=this,t=[];this.Dialogcode.namespace.forEach((function(a){var i=e.Dialogcode.selectName.indexOf(a)>-1,o=e.Dialogcode.modules.indexOf(a)>-1;o&&!i?t.push(v({app_key:e.appkey,module_id:e.Dialogcode.module_id,namespace:a,status:1})):i&&!o&&t.push(v({app_key:e.appkey,module_id:e.Dialogcode.module_id,namespace:a,status:0}))})),t.length>0&&(this.Dialogcode.loading=!0,Promise.all(t).finally((function(){e.Dialogcode.loading=!1})))},formatStatus:function(e,t){var a=this.ModuleList.rows.reduce((function(e,t){return e.concat(t.sid)}),[]);switch(a=Array.from(new Set(a)),e[t.property]){case 0:return a&&a.find((function(t){return t===e.sid}))?"可用":"未分配";case 1:return"等待接受邀请";case 2:return"已移除";default:return"已拒绝"}}}},k=_,x=(a("d5cc"),a("2877")),w=Object(x["a"])(k,u,p,!1,null,"087118fd",null),S=w.exports,D=a("12ec"),j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.CardList.loading,expression:"CardList.loading"}]},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("类型")]),a("el-select",{staticStyle:{width:"160px"},attrs:{size:"small"},on:{change:e.RefreshCardList},model:{value:e.CardList.sales_id,callback:function(t){e.$set(e.CardList,"sales_id",t)},expression:"CardList.sales_id"}},e._l(e.SalesList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.module_name))])])})),1),a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("经销商")]),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:e.RefreshCardList},model:{value:e.CardList.sid,callback:function(t){e.$set(e.CardList,"sid",t)},expression:"CardList.sid"}},[a("el-option",{attrs:{label:"全部",value:0}}),e._l(e.AgentList,(function(e){return a("el-option",{key:e.sid,attrs:{label:e.username,value:e.sid}})}))],2),a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("状态")]),a("el-select",{staticStyle:{width:"100px"},attrs:{size:"small"},on:{change:e.RefreshCardList},model:{value:e.CardList.status,callback:function(t){e.$set(e.CardList,"status",t)},expression:"CardList.status"}},[a("el-option",{attrs:{label:"未使用",value:0}}),a("el-option",{attrs:{label:"已使用",value:1}}),a("el-option",{attrs:{label:"全部",value:2}})],1),a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("范围")]),a("el-date-picker",{staticStyle:{width:"240px"},attrs:{size:"small",type:"daterange",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","picker-options":e.pickerOptions},on:{change:e.RefreshCardList},model:{value:e.CardList.datepicker,callback:function(t){e.$set(e.CardList,"datepicker",t)},expression:"CardList.datepicker"}}),a("el-checkbox",{staticStyle:{margin:"10px","font-size":"12px"},on:{change:e.RefreshCardList},model:{value:e.CardList.hidden_out,callback:function(t){e.$set(e.CardList,"hidden_out",t)},expression:"CardList.hidden_out"}},[e._v("已导出")]),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"350px",float:"right"},attrs:{clearable:"",placeholder:"搜索 卡号/用户名/备注",size:"small"},on:{change:e.RefreshCardList},model:{value:e.CardList.search,callback:function(t){e.$set(e.CardList,"search",t)},expression:"CardList.search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),a("el-button-group",{staticStyle:{float:"right","margin-right":"10px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialognewcard.visible=!0}}},[e._v("生成")]),a("el-button",{attrs:{size:"small",disabled:0==e.CardList.selectItems.length},on:{click:e.outCard}},[e._v("导出")]),a("el-button",{attrs:{size:"small"},on:{click:e.RefreshCardList}},[e._v("刷新")])],1)],1),a("el-table",{attrs:{data:e.CardList.rows,height:"550"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"经销商",prop:"sellers_username",width:"110"}}),a("el-table-column",{attrs:{label:"使用者",prop:"username",width:"110"}}),a("el-table-column",{attrs:{label:"卡号",prop:"cdkey",width:"300"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"created_at",formatter:e.formatTime,width:"160"}}),a("el-table-column",{attrs:{label:"使用时间",prop:"use_at",formatter:e.formatTime,width:"160"}}),a("el-table-column",{attrs:{label:"导出"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(1===t.row.is_out?"是":"否")}})]}}])}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{domProps:{textContent:e._s(1===t.row.status?"已使用":"未使用")}})]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}})],1),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50,100],disabled:e.pagination.disabled,background:"",layout:"total, sizes, prev, pager, next",total:e.pagination.total,"page-size":e.pagination.pagesize,"current-page":e.pagination.currentpage},on:{"update:pageSize":function(t){return e.$set(e.pagination,"pagesize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pagesize",t)},"update:currentPage":function(t){return e.$set(e.pagination,"currentpage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentpage",t)},"current-change":function(t){return e.RefreshCardList(e.pagination.currentpage)},"size-change":function(t){e.pagination.currentpage=1,e.RefreshCardList(e.pagination.currentpage)}}})],1)],1)],1),a("el-dialog",{attrs:{title:"卡密生成",visible:e.dialognewcard.visible,width:"300px"},on:{"update:visible":function(t){return e.$set(e.dialognewcard,"visible",t)}}},[a("div",{staticStyle:{"margin-bottom":"30px"}},[a("span",{staticStyle:{"margin-right":"15px"},domProps:{textContent:e._s(e.formatItem(e.CardList.sales_id).module_name)}}),a("span",{staticStyle:{"margin-right":"15px"},domProps:{textContent:e._s(e.formatItem(e.CardList.sales_id).caption)}})]),a("div",{staticStyle:{"margin-bottom":"30px"}},[a("span",{staticStyle:{"margin-right":"15px"}},[e._v("归属")]),a("el-select",{staticStyle:{width:"130px"},attrs:{size:"small"},model:{value:e.dialognewcard.sid,callback:function(t){e.$set(e.dialognewcard,"sid",t)},expression:"dialognewcard.sid"}},e._l(e.AgentList,(function(e){return a("el-option",{key:e.sid,attrs:{label:e.username,value:e.sid}})})),1)],1),a("div",[a("span",{staticStyle:{"margin-right":"15px"}},[e._v("数量")]),a("el-input-number",{attrs:{size:"mini"},model:{value:e.dialognewcard.num,callback:function(t){e.$set(e.dialognewcard,"num",t)},expression:"dialognewcard.num"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialognewcard.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.newcard}},[e._v("确 定")])],1)])],1)},L=[],C=(a("d81d"),a("ac1f"),a("841c"),a("251b")),P=a("ed08"),z={props:{appkey:{type:String,default:function(){return""}}},data:function(){return{CardList:{sales_id:0,sid:0,hidden_out:!1,status:0,datepicker:"",search:"",selectItems:[],loading:!0,rows:[]},pagination:{disabled:!0,pagesize:10,total:0,currentpage:1},SalesList:[],AgentList:[],dialognewcard:{visible:!1,num:10,sid:0},pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=new Date,a=new Date;e.$emit("pick",[a,t])}},{text:"本月",onClick:function(e){var t=new Date,a=new Date,i=(new Date).getUTCDate()-1;a.setTime(a.getTime()-864e5*i),e.$emit("pick",[a,t])}}]}}},mounted:function(){this.RefreshSalesList();var e=new Date,t=new Date,a=(new Date).getUTCDate()-1;t.setTime(t.getTime()-864e5*a),this.CardList.datepicker=[t,e]},methods:{RefreshSalesList:function(){var e=this;Promise.all([Object(c["g"])({app_key:this.appkey}),Object(d["e"])({app_key:this.appkey,module:"agent"})]).then((function(t){var a=Object(m["a"])(t,2),i=a[0],o=a[1];e.SalesList=i.result,e.AgentList=o.result.filter((function(e){return 0===e.status})),e.AgentList.length>0&&(e.dialognewcard.sid=e.CardList.sid=e.AgentList[0].sid),e.SalesList.length>0&&(e.CardList.sales_id=e.SalesList[0].id),e.RefreshCardList()}))},RefreshCardList:function(e){var t=this;this.CardList.loading=!0,this.pagination.disabled=!0;var a=0,i=this.pagination.pagesize;e?a=(e-1)*i:this.pagination.currentpage=1;var o=Object(m["a"])(this.CardList.datepicker,2),l=o[0],n=o[1];Object(C["a"])({app_key:this.appkey,hidden_out:this.CardList.hidden_out?1:0,status:this.CardList.status,sales_id:this.CardList.sales_id,sid:this.CardList.sid,offset:a||0,limit:i,start:l,end:n,search:this.CardList.search}).then((function(e){var a=e.result;t.CardList.rows=a.rows,t.pagination.total=a.total})).finally((function(){t.CardList.loading=!1,t.pagination.disabled=!1}))},handleSelectionChange:function(e){this.CardList.selectItems=e},newcard:function(){var e=this;this.dialognewcard.visible=!1,Object(C["b"])({app_key:this.appkey,sid:this.dialognewcard.sid,sales_id:this.CardList.sales_id,num:this.dialognewcard.num}).then((function(t){e.$message.success("生成成功."),e.RefreshCardList()}))},outCard:function(){var e=this,t=this.CardList.selectItems.map((function(e){return e.id}));this.$prompt("请输入备注信息","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(a){var i=a.value;Object(C["c"])({app_key:e.appkey,ids:t,remark:i}).then((function(e){Object(P["a"])(e.result,"导出卡密_".concat(i,"_").concat(Object(P["c"])(new Date),".txt"))}))}))},formatTime:function(e,t){return Object(P["b"])(e[t.property])},formatItem:function(e){if(!e||!this.SalesList)return{module_name:"",caption:""};var t=this.SalesList.find((function(t){return t.id===e}));return t}}},O=z,$=Object(x["a"])(O,j,L,!1,null,null,null),M=$.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.orderlist.loading,expression:"orderlist.loading"}]},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("商品类型")]),a("el-select",{staticStyle:{width:"300px"},attrs:{multiple:"","collapse-tags":"",clearable:"",size:"small",placeholder:"全部商品"},on:{change:e.Refreshorderlist},model:{value:e.orderlist.item_ids,callback:function(t){e.$set(e.orderlist,"item_ids",t)},expression:"orderlist.item_ids"}},e._l(e.saleslist,(function(t){return a("el-option",{key:t.id,attrs:{label:t.caption,value:t.id}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.caption))]),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px","margin-right":"20px"}},[e._v(e._s(t.module_name))])])})),1),a("span",{staticStyle:{margin:"10px","font-size":"13px"}},[e._v("充值类型")]),a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small"},on:{change:function(t){return e.Refreshorderlist(null)}},model:{value:e.orderlist.pay_type,callback:function(t){e.$set(e.orderlist,"pay_type",t)},expression:"orderlist.pay_type"}},[a("el-option",{attrs:{label:"充值订单",value:1}}),a("el-option",{attrs:{label:"后台订单",value:2}}),a("el-option",{attrs:{label:"所有订单",value:0}})],1),a("div",{staticStyle:{float:"right",width:"460px"}},[a("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"搜索 卡号/用户名/备注",size:"small"},on:{change:function(t){return e.Refreshorderlist(null)}},model:{value:e.orderlist.search,callback:function(t){e.$set(e.orderlist,"search",t)},expression:"orderlist.search"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1)],1)],1),a("el-table",{attrs:{data:e.orderlist.rows,height:"550"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"商品名称"}},[a("span",[e._v(e._s(t.row.name))])])],1)]}}])}),a("el-table-column",{attrs:{label:"套餐",prop:"item_id",formatter:e.formatbase,width:"100"}}),a("el-table-column",{attrs:{label:"商品",prop:"item_id",formatter:e.formatcaption,width:"100"}}),a("el-table-column",{attrs:{label:"点数",prop:"payment_price",width:"100"}}),a("el-table-column",{attrs:{label:"用户名",prop:"username",width:"120"}}),a("el-table-column",{attrs:{label:"经销商",prop:"details.seller_username",width:"120"}}),a("el-table-column",{attrs:{label:"来源",prop:"details.source",width:"120"}}),a("el-table-column",{attrs:{label:"来源数据",prop:"details.source_data",width:"290"}}),a("el-table-column",{attrs:{label:"备注",prop:"details.remark"}}),a("el-table-column",{attrs:{label:"订单时间",prop:"updated_at",formatter:e.formatTime,width:"150"}})],1),a("el-pagination",{attrs:{"page-sizes":[10,20,30,40,50,100],disabled:e.pagination.disabled,background:"",layout:"total, sizes, prev, pager, next",total:e.pagination.total,"page-size":e.pagination.pagesize,"current-page":e.pagination.currentpage},on:{"update:pageSize":function(t){return e.$set(e.pagination,"pagesize",t)},"update:page-size":function(t){return e.$set(e.pagination,"pagesize",t)},"update:currentPage":function(t){return e.$set(e.pagination,"currentpage",t)},"update:current-page":function(t){return e.$set(e.pagination,"currentpage",t)},"current-change":function(t){return e.Refreshorderlist(e.pagination.currentpage)},"size-change":function(t){e.pagination.currentpage=1,e.Refreshorderlist(e.pagination.currentpage)}}})],1)],1)],1)],1)},A=[],F=a("1f94"),T={props:{appkey:{type:String,default:function(){return""}}},data:function(){return{orderlist:{loading:!0,rows:[],pagination:{pagesize:10,pageindex:1,total:0},search:"",item_ids:[],pay_type:1},saleslist:[],pagination:{disabled:!0,pagesize:10,total:0,currentpage:1}}},mounted:function(){var e=this;Object(c["g"])({app_key:this.appkey}).then((function(t){e.saleslist=t.result,e.Refreshorderlist()}))},methods:{Refreshorderlist:function(e){var t=this;this.orderlist.loading=!0,this.pagination.disabled=!0,Object(F["b"])(this.formatFormData(e)).then((function(e){t.orderlist.rows=e.result.rows,t.pagination.total=e.result.total})).finally((function(){t.orderlist.loading=!1,t.pagination.disabled=!1}))},formatFormData:function(e){var t=0;return e?t=(e-1)*this.pagination.pagesize:this.pagination.currentpage=1,{app_key:this.appkey,offset:t,limit:this.pagination.pagesize,search:this.orderlist.search,item_ids:this.orderlist.item_ids,pay_type:this.orderlist.pay_type}},formatTime:function(e,t){return Object(P["b"])(e[t.property],"{y}-{m}-{d} {h}:{i}:{s}")},formatcaption:function(e,t){var a=e[t.property];return this.saleslist.find((function(e){return e.id===a})).caption},formatbase:function(e,t){var a=e[t.property];return this.saleslist.find((function(e){return e.id===a})).module_name}}},R=T,N=Object(x["a"])(R,I,A,!1,null,null,null),U=N.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"ide",staticStyle:{"background-color":"#252525"},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"f11",void 0,t.key,void 0)?null:(t.preventDefault(),e.idescreenfull(t))}}},[a("el-row",[a("el-col",{attrs:{span:3}},[a("filenavcomponent",{directives:[{name:"loading",rawName:"v-loading",value:e.filenav.loading,expression:"filenav.loading"}],attrs:{"element-loading-text":"玩命加载中..","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)",data:e.filenav.treeItems},on:{Change:e.filenavChange,refresh:e.refreshNamespaceList,createfile:e.createfile}})],1),a("el-col",{attrs:{span:21}},[a("monacocomponent",{directives:[{name:"loading",rawName:"v-loading",value:e.codeIde.loading,expression:"codeIde.loading"}],attrs:{full:e.isfull,title:e.filenav.selectItem.label,code:e.codeIde.code,edit:e.codeIde.edit,language:e.codeIde.language,"element-loading-text":"玩命加载中....","element-loading-background":"rgba(0, 0, 0, 0.8)"},on:{"update:edit":function(t){return e.$set(e.codeIde,"edit",t)},savecode:e.savecode}})],1),a("el-col",{attrs:{span:24}},[a("div",{staticClass:"codeideboom"},[a("span",[e._v(" "+e._s(e.codeIde.loading?"加载中":e.codeIde.edit==e.filenav.selectItem.source.codes&&e.codeIde.import==e.filenav.selectItem.source.import?"无更改":"未保存"))]),a("el-button",{staticStyle:{"margin-left":"180px",padding:"0",color:"#fff"},attrs:{type:"text"},on:{click:e.showDialogImport}},[e._v("Import("+e._s(-1==e.codeIde.import.indexOf("@")?"0":e.codeIde.import.split(",").length)+")")]),a("el-button",{staticStyle:{"margin-left":"80px",padding:"0",color:"#fff"},attrs:{type:"text"},on:{click:e.refreshcode}},[e._v("刷新")]),a("el-button",{staticStyle:{"margin-left":"10px",padding:"0",color:"#fff"},attrs:{type:"text"},on:{click:e.savecode}},[e._v("保存")]),a("el-button",{staticStyle:{"margin-left":"10px",padding:"0",color:"#fff"},attrs:{type:"text"},on:{click:function(t){return e.copynamespace(e.filenav.selectItem.namespace+"."+e.filenav.selectItem.label)}}},[e._v(e._s(e.filenav.selectItem.namespace)+"."+e._s(e.filenav.selectItem.label))]),a("span",{staticStyle:{"margin-left":"50px"},domProps:{textContent:e._s(e.status)}}),a("div",{staticStyle:{float:"right"}},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.Setlanguage}},[a("span",{staticClass:"el-dropdown-link",staticStyle:{color:"#fff"}},[e._v(" "+e._s(e.codeIde.language)),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.languages,(function(t){return a("el-dropdown-item",{key:t.language,attrs:{command:t.language},domProps:{textContent:e._s(t.language)}})})),1)],1)],1)],1)])],1),a("el-dialog",{attrs:{title:"Import",visible:e.dialogImport.visible,width:"55%"},on:{"update:visible":function(t){return e.$set(e.dialogImport,"visible",t)}}},[a("el-transfer",{attrs:{filterable:"","filter-method":e.filterMethod,"filter-placeholder":"关键字",data:e.filenav.rows,props:e.dialogImport.props,titles:["可用代码","已选代码"],"render-content":e.dialogImportrenderContent},model:{value:e.dialogImport.value,callback:function(t){e.$set(e.dialogImport,"value",t)},expression:"dialogImport.value"}}),a("span",{staticClass:"dialog-footer",staticStyle:{"padding-right":"30px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogImport.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogImport.visible=!1,e.saveimport()}}},[e._v("确 定")])],1)],1)],1)},V=[],B=(a("a15b"),a("8a79"),a("1276"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"idehead"},[a("span",[e._v(e._s(e.titled))]),a("span",{staticStyle:{color:"#00ddaa"}},[e._v(" - Tmdos Code")])]),a("div",{ref:"container",staticClass:"container",style:{height:e.height+"px"},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"s",void 0,t.key,void 0)?null:t.ctrlKey?(t.preventDefault(),e.onsave(t)):null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"f",void 0,t.key,void 0)?null:t.ctrlKey&&t.shiftKey?(t.preventDefault(),e.formatDocument(t)):null}]}})])}),K=[],G=(a("780f"),a("c2c6")),q={name:"Monaco",props:{code:{type:String,default:function(){return""}},title:{type:String,default:function(){return null}},full:{type:Boolean,default:function(){return!1}},edit:{type:String,default:function(){return""}},language:{type:String,default:function(){return""}}},data:function(){return{monacoEditor:{},myObserver:new ResizeObserver(this.onResize),titled:this.title||"欢迎页",height:625}},watch:{code:"changeData",language:"setlanguage",title:"settitle",full:"setfull"},mounted:function(){this.monacoEditor=G["editor"].create(this.$refs.container,{value:this.code,readOnly:!1,language:this.language,theme:"vs-dark"}),this.monacoEditor.onDidChangeModelContent(this.onDidChangeModelContent),this.myObserver.observe(this.$refs.container)},beforeDestroy:function(){this.destroyEditor(),this.myObserver.unobserve(this.$refs.container)},methods:{destroyEditor:function(){this.monacoEditor.dispose()},onsave:function(e){var t=this.monacoEditor.getValue();this.$emit("savecode",t)},changeData:function(e,t){this.monacoEditor.setValue(e)},onDidChangeModelContent:function(){this.$emit("update:edit",this.monacoEditor.getValue())},setlanguage:function(e,t){G["editor"].setModelLanguage(this.monacoEditor.getModel(),e)},onResize:function(){this.monacoEditor.layout()},formatDocument:function(){this.monacoEditor.getAction(["editor.action.formatDocument"])._run(),console.log("格式化代码")},settitle:function(e,t){this.titled=e},setfull:function(e,t){this.height=e?window.screen.height-50:625}}},H=q,J=(a("bffc"),Object(x["a"])(H,B,K,!1,null,"50b6540f",null)),W=J.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("div",{staticStyle:{background:"rgba(55,55,55)",height:"25px",padding:"5px 15px 0 5px"}},[a("el-link",{staticStyle:{float:"left"},attrs:{type:"info"},on:{click:e.showDialogNewFile}},[a("i",{staticClass:"el-icon-plus"})]),a("el-link",{staticStyle:{float:"right"},attrs:{type:"info"},on:{click:e.refreshFile}},[a("i",{staticClass:"el-icon-refresh"})])],1),a("el-tree",{staticClass:"tree",attrs:{data:e.data,"icon-class":"el-icon-folder-opened",props:e.defaultProps,"highlight-current":"","default-expand-all":"","render-content":e.navrenderContent},on:{"current-change":e.currentChange,"node-contextmenu":e.rightClick}}),a("div",{directives:[{name:"show",rawName:"v-show",value:e.namespacemenuVisible,expression:"namespacemenuVisible"}],ref:"namespace_menu",staticClass:"menu"},[e._m(0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.classmenuVisible,expression:"classmenuVisible"}],ref:"class_menu",staticClass:"menu"},[e._m(1)]),a("el-dialog",{attrs:{title:"提示",visible:e.DialogNewFile.visible,width:"400px","close-on-click-modal":!1,"custom-class":"newfile"},on:{"update:visible":function(t){return e.$set(e.DialogNewFile,"visible",t)}}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.DialogNewFile.form}},[a("el-form-item",{attrs:{label:"命名空间"}},[a("el-input",{attrs:{size:"small"},model:{value:e.DialogNewFile.form.namespace,callback:function(t){e.$set(e.DialogNewFile.form,"namespace",t)},expression:"DialogNewFile.form.namespace"}})],1),a("el-form-item",{attrs:{label:"类名"}},[a("el-input",{attrs:{size:"small"},model:{value:e.DialogNewFile.form.class,callback:function(t){e.$set(e.DialogNewFile.form,"class",t)},expression:"DialogNewFile.form.class"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.DialogNewFile.visible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.newFilesave}},[e._v("确 定")])],1)],1)],1)},Q=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",{staticClass:"menu_item"},[e._v("添加")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",{staticClass:"menu_item"},[e._v("删除")])])}],X={name:"Filenav",props:{data:{type:Array,default:function(){return[]}}},data:function(){return{classmenuVisible:!1,namespacemenuVisible:!1,defaultProps:{children:"children",label:"label"},select:{},rightitem:{},DialogNewFile:{loading:!1,visible:!1,form:{namespace:"",class:""}}}},methods:{currentChange:function(e){if(this.select!==e){var t=this.select;this.select=e,e.id&&this.$emit("Change",e,t)}},rightClick:function(e,t,a,i){this.rightitem=t;var o=t.id?this.$refs.class_menu:this.$refs.namespace_menu;this.namespacemenuVisible=!1,this.classmenuVisible=!1,t.id?this.classmenuVisible=!0:this.namespacemenuVisible=!0,document.addEventListener("click",this.foo),o.style.display="block",o.style.left="70px",o.style.top=e.clientY-237+"px"},foo:function(){this.classmenuVisible=!1,this.namespacemenuVisible=!1,document.removeEventListener("click",this.foo)},navrenderContent:function(e,t){var a=t.data;t.node,t.store,t._self;if(a.id){var i=this.geticonclass(a.label);return e("div",{class:"navfile"},[" ",e("svg-icon",{attrs:{"icon-class":i}}),"  ",a.label])}return e("div",{class:"navdir"},[a.label])},geticonclass:function(e){var t=e.split(".").pop().toLowerCase();switch(t){case"cs":return"file_type_csharp";case"js":return"file_type_js";case"html":return"file_type_htmlhint";case"json":return"file_type_json";default:return"default_file"}},showDialogNewFile:function(){this.DialogNewFile.visible=!0},refreshFile:function(){this.$emit("refresh")},newFilesave:function(){console.log(2333),this.$emit("createfile",this.DialogNewFile.form.namespace,this.DialogNewFile.form.class),this.DialogNewFile.visible=!1}}},Z=X,ee=(a("88f8"),a("dd9f"),Object(x["a"])(Z,Y,Q,!1,null,"2673aa2a",null)),te=ee.exports,ae=a("93bf"),ie=a.n(ae),oe=a("e762"),le={name:"Remotecode",components:{monacocomponent:W,filenavcomponent:te},props:{appkey:String},data:function(){var e='@"\t欢迎使用TMDOS代码编辑器\r\n 本编辑器基于 monaco-editor\r\n 支持 js json csharp sql 等多种语言."',t={source:{id:-1,project_id:0,class_name:"",namespace:"",import:"",scene:0,codes:"",created_at:0,updated_at:0,status:0}};return{languages:[{language:"csharp",rules:[".cs"]},{language:"html",rules:[".html"]},{language:"typescript",rules:[".ts",".js"]},{language:"json",rules:[".json"]},{language:"text",rules:[".txt"]}],myObserver:new ResizeObserver(this.onResize),isfull:!1,status:"",defaultitem:t,defaultcode:e,codeIde:{loading:!1,code:e,height:650,edit:"",import:"",language:"csharp"},filenav:{loading:!1,treeItems:[],rows:[],selectItem:Object(s["a"])({},t)},dialogImport:{visible:!1,value:[],props:{key:"id",label:"class_name"}}}},mounted:function(){this.refreshNamespaceList(),this.myObserver.observe(this.$refs.ide)},beforeDestroy:function(){this.myObserver.unobserve(this.$refs.ide)},methods:{refreshNamespaceList:function(){var e=this;this.filenav.loading=!0,g({app_key:this.appkey}).then((function(t){e.Setlanguage("csharp");var a=t.result;e.filenav.rows=a,e.filenav.treeItems=e.namespaceToTree(a),e.filenav.selectItem=e.defaultitem,e.codeIde.code=e.defaultcode})).finally((function(){e.filenav.loading=!1}))},savecode:function(e){var t=this;this.status="正在保存..";var a=this.filenav.selectItem.source;a.id>0&&(this.codeIde.edit!==a.codes||this.codeIde.import!==a.import)?y({app_key:this.appkey,namespace:a.namespace,class_name:a.class_name,codes:oe["a"].encode(this.codeIde.edit),import:this.codeIde.import,scene:0,status:0}).then((function(e){a.codes=t.codeIde.edit,a.import=t.codeIde.import,t.status="保存成功..",t.$message({message:"保存成功..",type:"success"})})):(this.$message("当前文件不需要保存哦"),this.status="当前文件不需要保存哦..");var i=this;setTimeout((function(){i.status=""}),2e3)},namespaceToTree:function(e){for(var t=[],a=function(a){var i={label:e[a].class_name,id:e[a].id,namespace:e[a].namespace,code:null,import:""},o=t.find((function(e){return e.label===i.namespace}));o?o.children.push(i):t.push({label:i.namespace,children:[i]})},i=0;i<e.length;i++)a(i);return t},filenavChange:function(e,t){this.Setlanguage(e),this.filenav.selectItem=e,t&&(t.code=this.codeIde.edit,t.import=this.codeIde.import),e.code?(this.codeIde.code=e.code,this.codeIde.import=e.import):this.refreshcode()},Setlanguage:function(e){if(e.label){var t=this.languages.find((function(t){return t.rules.find((function(t){return e.label.endsWith(t)}))}));e=t?t.language:"text"}this.codeIde.language!==e&&(this.codeIde.language=e)},refreshcode:function(){var e=this,t=this.filenav.selectItem;t.id>0&&(this.codeIde.code=null,this.codeIde.loading=!0,h({app_key:this.appkey,id:t.id,scene:0,offset:0,limit:1}).then((function(a){var i=a.result.rows[0];t.source=i,e.codeIde.code=t.code=oe["a"].decode(i.codes),e.codeIde.import=i.import})).finally((function(){e.codeIde.loading=!1})))},showDialogImport:function(){var e=this;if(console.log(this.filenav.selectItem.source.id>0),this.filenav.selectItem.source.id>0){var t=this.codeIde.import.split(","),a=[];t.forEach((function(t){var i=t.split("@");if(2===i.length){var o=e.filenav.rows.find((function(e){return e.namespace===i[0]&&e.class_name===i[1]}));o&&a.push(o.id)}})),this.dialogImport.value=[].concat(a),this.dialogImport.visible=!0}},createfile:function(e,t){var a=this;y({app_key:this.appkey,namespace:e,class_name:t,codes:oe["a"].encode("new calss a{}"),scene:0,status:0}).then((function(e){a.refreshNamespaceList()}))},saveimport:function(){var e=this,t=[];this.dialogImport.value.forEach((function(a){var i=e.filenav.rows.find((function(e){return e.id===a}));i&&t.push("".concat(i.namespace,"@").concat(i.class_name))})),this.codeIde.import=t.join(",")},filterMethod:function(e,t){return t.class_name.indexOf(e)>-1},dialogImportrenderContent:function(e,t){return e("div",[e("span",[t.class_name]),e("span",{class:"fr"},[t.namespace])])},idescreenfull:function(){ie.a.isEnabled&&ie.a.request(this.$refs.ide)},onResize:function(e){var t=e[0].contentRect;t.width===window.screen.width&&t.height===window.screen.height?this.isfull=!0:this.isfull&&(this.isfull=!1)},copynamespace:function(e){var t=this;this.$copyText(e).then((function(){t.$message.info("复制成功 ".concat(e))})).catch((function(){t.$message.warning("该浏览器不支持复制")}))}}},ne=le,se=(a("3d45"),a("81e3"),Object(x["a"])(ne,E,V,!1,null,"b9434c56",null)),re=se.exports,ce={name:"Devmanager",components:{shopcomponent:S,usercomponent:D["a"],cardcomponent:M,codecomponent:re,ordercomponent:U},data:function(){return{appkey:"",tabsValue:"shop",dialogeditProject:{tabIndex:"base",Visible:!1,From:{},loading:!1},dialogteamlist:{visible:!1,loading:!1,rows:[],username:"",remote:{loading:!1,options:[]}},ProjectInfoloading:!0,ProjectInfo:{reset:0,caption:"应用名称",describe:"应用简介"},ModuleList:{selectItem:"全部商品",rows:[],loading:!0},SalesList:{showrows:[],rows:[],loading:!0},fromSelects:{service_status:["收费运营","免费开放","关闭服务"],registers_status:["开放注册","关闭注册"],verify_type:["租赁授权","次数","一口价"],try_cycle_type:["时","天","月"],bind_type:["账号互斥","机器码+账户模式","不限制"],bind_process:["注销最早登录用户","直接提示用户"],sign_pack:["Wss Online","http ping pong"],reset:["不操作","secret","private_salt","secret and private_salt"]}}},computed:Object(s["a"])({},Object(r["b"])(["name","email"])),created:function(){this.appkey=this.$route.params.appkey},mounted:function(){this.RefreshProjectInfo()},methods:{RefreshProjectInfo:function(){var e=this;this.ProjectInfoloading=!0,Object(c["d"])({app_key:this.appkey}).then((function(t){e.ProjectInfo=t.result,e.ProjectInfo.reset=0,e.ProjectInfoloading=!1}))},reseteditForm:function(){this.dialogeditProject.tabIndex="base",this.dialogeditProject.From=Object(s["a"])({},this.ProjectInfo)},editsubmitForm:function(){var e=this;this.dialogeditProject.loading=!0,Object(d["j"])(Object(s["a"])({app_key:this.appkey},this.dialogeditProject.From)).then((function(){e.dialogeditProject.loading=!1,e.dialogeditProject.Visible=!1,e.ProjectInfo=Object(s["a"])({},e.dialogeditProject.From)}))},showdialogteamlist:function(){this.dialogteamlist.visible=!0,this.RefreshTeamlist()},RefreshTeamlist:function(){var e=this;this.dialogteamlist.loading=!0,Object(d["e"])({app_key:this.appkey,module:"developer"}).then((function(t){var a=t.result;e.dialogteamlist.rows=a.filter((function(e){return 2!==e.status}))})).finally((function(){e.dialogteamlist.loading=!1}))},removeteam:function(e){var t=this;this.dialogteamlist.loading=!0,Object(d["d"])({app_key:this.appkey,module:"developer",username:e}).finally((function(){t.RefreshTeamlist()}))},addteam:function(e){var t=this;this.dialogteamlist.loading=!0,Object(d["c"])({app_key:this.appkey,module:"developer",username:e}).finally((function(){t.RefreshTeamlist()}))},remoteselectMember:function(e){var t=this;""!==e?(this.dialogteamlist.remote.loading=!0,Object(c["h"])({app_key:this.appkey,module:"developer",username:e}).then((function(e){t.dialogteamlist.remote.options=e.result})).finally((function(){t.dialogteamlist.remote.loading=!1}))):this.dialogteamlist.remote.options=[]},formatStatus:function(e,t){switch(e[t.property]){case 0:return"正常";case 1:return"已邀请";case 2:return"已移除";default:return"已拒绝"}}}},de=ce,ue=(a("a87e"),Object(x["a"])(de,l,n,!1,null,"05c73dba",null)),pe=ue.exports,me={components:{devmanager:pe}},fe=me,ge=(a("30ad"),Object(x["a"])(fe,i,o,!1,null,"1e473de3",null));t["default"]=ge.exports},cfe3:function(e,t,a){},d5cc:function(e,t,a){"use strict";var i=a("3fa4"),o=a.n(i);o.a},dd9f:function(e,t,a){"use strict";var i=a("cfe3"),o=a.n(i);o.a},ed08:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return n}));a("4160"),a("c975"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("3ca3"),a("4d90"),a("5319"),a("1276"),a("159b"),a("ddb0"),a("2b3d");var i=a("53ca");function o(e,t){if(0===arguments.length||!e)return null;var a,o=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(i["a"])(e)?a=e:("string"===typeof e&&(e=/^[0-9]+$/.test(e)?parseInt(e):e.replace(new RegExp(/-/gm),"/")),"number"===typeof e&&10===e.toString().length&&(e*=1e3),a=new Date(e));var l={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},n=o.replace(/{([ymdhisa])+}/g,(function(e,t){var a=l[t];return"a"===t?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return n}function l(e,t){if(!e)return"-";e=10===(""+e).length?1e3*parseInt(e):+e;var a=new Date(e),i=Date.now(),l=(i-a)/1e3;return l<30?"刚刚":l<3600?Math.ceil(l/60)+"分钟前":l<86400?Math.ceil(l/3600)+"小时前":l<172800?"1天前":t?o(e,t):a.getMonth()+1+"月"+a.getDate()+"日"+a.getHours()+"时"+a.getMinutes()+"分"}function n(e,t){var a=new Blob([e]),i=document.createElement("a"),o=window.URL.createObjectURL(a);i.href=o,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(o)}},fc2c:function(e,t,a){}}]);